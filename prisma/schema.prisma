generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id                Int               @id @default(autoincrement())
  email             String            @unique
  password          String
  name              String?
  role              String            @default("USER")
  isVerified        Boolean           @default(false)
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  verificationTokens VerificationToken[]
}

model VerificationToken {
  id        Int      @id @default(autoincrement())
  token     String   @unique
  userId    Int
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  expiresAt DateTime
  createdAt DateTime @default(now())
}

model category {
  category_id   Int            @id @default(autoincrement())
  category_name String         @db.VarChar(255)
  created_at    DateTime       @default(now())
  updated_at    DateTime       @updatedAt
  products      products[]     @relation("ProductCategory")
  sub_categories sub_category[] @relation("CategoryToSubCategory")
}

model sub_category {
  sub_category_id    Int       @id @default(autoincrement())
  sub_category_title String    @db.VarChar(255)
  category_id        Int?      // Removed @default(0)
  created_at         DateTime  @default(now())
  updated_at         DateTime  @updatedAt
  products           products[] @relation("ProductSubCategory")
  category           category? @relation("CategoryToSubCategory", fields: [category_id], references: [category_id])
}

model products {
  id                   Int         @id @default(autoincrement())
  item_name            String?     @db.VarChar(255)
  item_code            String?     @db.VarChar(50)
  barcode              String?     @db.VarChar(50)
  uom                  Float?      @default(0.0)
  item_desccription    String?     @db.Text
  enable_batching      Int?        @default(0)
  qunatity             Float?      @default(0.0)
  cost_per_unit        Float?
  value                Float?      @default(0.0)
  min_order            Float?      @default(0.0)
  category_id          Int?        @map("category")
  sub_category_id      Int?        @map("sub_category")
  remarks              String?     @db.Text
  default_tax_account  String?     @db.VarChar(50) @default("None")
  additional_cess      String?     @db.VarChar(50)
  d_purchase_price_ex  Float?
  d_purchase_price_in  Float?
  d_sale_price_in      Float?
  d_sale_price_ex      Float?
  default_discount     Float?
  category             category?   @relation("ProductCategory", fields: [category_id], references: [category_id])
  sub_category         sub_category? @relation("ProductSubCategory", fields: [sub_category_id], references: [sub_category_id])
}